/*
[실습#4] 로그인 시에 비밀번호 검사 프로그램
 로그인 시에 비밀번호를 검사하는 함수 int check()를 작성해서
테스트 하시오. check()함수가 한번 호출될 때마다 비밀번호를
질문하고 일치 여부를 0과 1로 반환한다. 비밀번호는 숫자 1234로
고정되어 있다고 가정한다. check()가 3번 이상 호출되고 비밀번호가
일치하지 않으면 check() 는 “로그인 시도 횟수 초과” 메시지를
출력한다. check()함수 안에 정적변수를 선언하여 사용해보자
*****************************************************
1. 비밀번호 입력
2. 맞는지 확인
3-1. 맞으면 그 후 부를 시, 이미 맞음 출력 
//맞으면 바로 종료하도록 발전

3-2. 아니면 그 후 불러서 확인 시,
4번째로 함수를 부르면 로그인시도횟수초과메시지 출력

핵심 판단 :
함수 부른 숫자 3보다 큼 -> 로그인 시도횟수 초과 출력, 입력 안받음
맞아서 더이상 로그인 필요 없음 -> (이미 비밀번호 맞춤 출력,) 입력 안받음
******************************************************
*/

#include <stdio.h>
#include <stdlib.h>
int check()
{
	static int call_count = 0;
	call_count++;
	int static truth = 0, password = 1234, input_password = 0;

	/*
	if (truth == 1) {
		printf("이미 비밀번호를 맞추었습니다.\n");
	}
	//처음에 맞추고 다시 시도하면 이미 맞추었다고 출력 안내
	//하지만 맞추면 바로 종료하는 내용으로 발전시킴
	*/
	if (call_count <= 3 && truth == 0) {

		printf("비밀번호 : ");
		scanf_s("%d", &input_password);

		if (input_password == password) {
			printf("로그인 되었음\n");
			truth++;
			exit(1);
			//조교님이 맞으면 바로 종료하도록 발전시킬 수 있다고 하심.
		}
	}
	else if (call_count > 3) {
		printf("로그인 시도횟수 초과");
	}
	
	return truth;
}

int main(void)
{
	check();
	check();
	check();
	check();
	return 0;
}